# This script shall visualize the resulting pattern from the input button presses.

from py2c import rowCountAndColumnCount, toggleButtonAndNeighbors, printMatrix2d, symbolOn, symbolOff


def solveLightsOff(matrix):
    buttonsPressedToReturn = None
    dimension = rowCountAndColumnCount * rowCountAndColumnCount
    terminate = False

    if all(symbol == symbolOff for symbol in matrix):
        buttonsPressedToReturn = ()
        terminate = True

    for maxNumberOfButtonPresses in range(1, dimension + 1, 1):
        if terminate:
            break

        buttonsPressed = list(range(maxNumberOfButtonPresses))

        workingMatrix = matrix.copy()
        for button in buttonsPressed:
            toggleButtonAndNeighbors(button, workingMatrix)

        permutate = (0 < len(buttonsPressed))
        while permutate and not terminate:
            # check whether finished
            success = all(symbol == symbolOff for symbol in workingMatrix)
            if success:
                buttonsPressedToReturn = buttonsPressed
                terminate = True
            else:
                # permutate next button
                minButtonAdvanced = -1
                supportedMaxIndex = dimension - 1
                while buttonsPressed[minButtonAdvanced] == supportedMaxIndex:
                    if abs(minButtonAdvanced) == maxNumberOfButtonPresses:
                        # last index reached
                        permutate = False
                        break
                    else:
                        # check previous index
                        minButtonAdvanced -= 1
                        supportedMaxIndex -= 1

                if permutate:
                    # advance first index
                    buttonIndex = minButtonAdvanced
                    toggleButtonAndNeighbors(buttonsPressed[buttonIndex], workingMatrix)  # revert old
                    buttonsPressed[buttonIndex] = buttonsPressed[buttonIndex] + 1
                    toggleButtonAndNeighbors(buttonsPressed[buttonIndex], workingMatrix)  # apply new
                    # reset all following
                    for buttonIndex in range(minButtonAdvanced + 1, 0, 1):
                        toggleButtonAndNeighbors(buttonsPressed[buttonIndex], workingMatrix)  # revert old
                        buttonsPressed[buttonIndex] = buttonsPressed[buttonIndex - 1] + 1
                        toggleButtonAndNeighbors(buttonsPressed[buttonIndex], workingMatrix)  # apply new

    return buttonsPressedToReturn


if __name__ == "__main__":
    lightss = (
        # (139, (0, 3, 4, 10, 11, 12, 17, 20,)),
        # (140, (0, 1, 3, 5, 7, 8, 10, 13, 14, 15, 17, 19,)),
        # (141, (0, 1, 2, 6, 8, 11, 14, 15, 17, 19, 20, 21, 22, 23, 24,)),
        # (142, (0, 1, 2, 7, 8, 9, 10, 11, 13, 15, 19, 23,)),
        # (143, (0, 5, 11, 12, 13, 16, 20, 21, 24,)),
        # (144, (4, 10, 11, 12, 16, 18, 21, 22,)),
        # (145, (2, 3, 4, 6, 8, 9, 12, 13, 14, 18, 20, 23,)),
        # (146, (1, 2, 4, 6, 8, 9, 10, 13, 14, 16, 19, 23,)),
        # (147, (0, 2, 5, 6, 7, 8, 10, 11, 13, 15, 18, 23, 24,)),
        # (148, (2, 4, 5, 6, 7, 9, 11, 13, 14, 17, 18, 20, 21, 22,)),
        # (149, (1, 4, 5, 8, 15, 16, 19, 20, 24,)),
        # (150, (1, 2, 4, 7, 9, 10, 11, 13, 14, 15, 18, 19, 22, 23, 24,)),
        # (151, (1, 2, 4, 9, 11, 12, 13, 14, 15, 17, 18, 21, 22,)),
        # (152, ()),
        # (153, (1, 3, 5, 10, 11, 13, 15, 17, 19, 20, 23, 24,)),
        # (154, ()),
        # (155, (1, 4, 5, 6, 7, 9, 11, 13, 14, 16, 17, 18, 19, 20, 21, 22, 23)),
        # (156, ()),
        # (157, (1, 3, 5, 8, 13, 14, 15, 16, 19, 20, 23)),
        # (158, (1, 4, 5, 6, 7, 8, 9, 11, 12, 15, 18, 19, 20, 22)),
        # (159, (1, 2, 7, 8, 9, 15, 17, 18, 19, 20, 22)),
        # (160, (0, 1, 3, 6, 7, 8, 9, 10, 11, 13, 16, 19, 21, 22, 24)),
        # (161, (0, 2, 3, 4, 7, 10, 14, 17, 18, 21, 23, 24)),
        # (162, (0, 1, 2, 4, 9, 10, 16, 17, 22)),
        # (163, (1, 2, 3, 6, 7, 13, 14, 15, 17, 19, 22)),
        # (164, (1, 6, 9, 10, 12, 13, 17, 23)),
        # (165, (1, 5, 6, 7, 8, 9, 11, 14, 15, 16, 17, 19, 23)),
        # (166, (0, 1, 3, 5, 6, 9, 10, 14, 16, 17, 19, 20, 22, 23, 24)),
        # (167, (0, 2, 3, 5, 6, 11, 12, 17, 18, 19, 20)),
        # (168, (0, 2, 3, 4, 7, 8, 9, 11, 17, 19, 20, 22, 24)),
        # (169, (0, 1, 2, 3, 6, 8, 9, 11, 12, 17, 20, 24)),
        # (170, (0, 4, 5, 7, 8, 9, 10, 11, 12, 13, 16, 18, 21, 23, 24)),
        # (171, (1, 2, 4, 5, 7, 9, 11, 13, 14, 15, 16, 18, 19, 20, 21, 22, 24)),
        # (172, (1, 2, 3, 4, 5, 6, 9, 13, 15, 16, 17, 18, 19, 20, 23)),
        # (173, (1, 2, 3, 6, 8, 12, 13, 15, 16, 22, 24)),
        # (174, (3, 4, 5, 6, 7, 8, 9, 11, 14, 15, 19, 20, 24)),
        # (175, (3, 4, 9, 11, 12, 14, 18)),
        # (176, (6, 8, 10, 12, 13, 15, 17, 18, 19, 21, 22, 23)),
        # (177, (5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 21, 23)),
        # (178, (0, 6, 8, 9, 10, 11, 14, 16, 17, 22)),
        # (179, (2, 6, 7, 9, 10, 11, 12, 13, 16, 17, 19, 21, 22)),
        # (180, (2, 3, 4, 5, 10, 14, 17, 20, 22, 23)),
        # (181, (1, 3, 4, 7, 8, 9, 10, 12, 17, 19, 23, 24)),
        # (182, (0, 2, 3, 7, 8, 11, 16, 17, 22, 24)),
        # (183, (2, 8, 9, 10, 12, 15, 16, 17, 18, 23)),
        # (184, (0, 2, 5, 7, 9, 10, 14, 16, 19, 21, 22, 23, 24)),
        # (185, (3, 5, 8, 9, 10, 13, 19, 20)),
        # (186, (0, 1, 2, 7, 8, 10, 12, 14, 17, 18, 21, 22, 24)),
        # (187, (0, 1, 2, 3, 5, 9, 12, 13, 14, 17, 18, 20, 21, 22, 24)),
        # (188, (1, 4, 6, 7, 10, 13, 14, 17, 20, 21, 22, 24)),
        # (189, (0, 3, 7, 8, 9, 11, 12, 14, 17, 19, 20, 21)),
        # (190, (4, 7, 11, 14, 15, 16, 17, 18, 21)),
        # (191, (0, 1, 3, 8, 9, 13, 14, 16, 17, 19, 21)),
        # (192, (4, 5, 6, 8, 11, 13, 15, 16, 20, 22, 23, 24)),
        # (193, (1, 2, 3, 4, 5, 6, 8, 12, 13, 17, 18, 20, 22, 23)),
        # (194, (5, 6, 10, 14, 16, 19, 20, 24)),
        # (195, (0, 1, 4, 6, 7, 8, 13, 14, 20, 21, 22, 24)),
        # (196, (0, 4, 5, 7, 8, 9, 11, 14, 15, 17, 18, 20, 23)),
        # (197, (0, 3, 4, 5, 9, 13, 14, 15, 17, 19, 24)),
        # (198, (3, 4, 5, 6, 7, 11, 12, 15, 16, 17, 18, 19, 21, 22, 23, 24)),
        # (199, (1, 3, 5, 7, 8, 9, 10, 12, 13, 14, 17, 19, 20, 21, 22, 24)),
        # (200, (1, 2, 6, 7, 8, 10, 11, 12, 13, 14, 15, 16, 17, 20, 23, 24)),
        # (201, (0, 4, 5, 6, 7, 8, 10, 12, 13, 15, 16, 17, 20, 22, 23)),
        # (202, (2, 8, 9, 13, 14, 16, 17, 19, 21, 23)),
        # (203, (4, 5, 7, 8, 11, 12, 13, 15, 17, 18, 24)),
        # (204, (1, 3, 4, 8, 9, 11, 12, 13, 14, 17, 18, 19, 20, 22, 23)),
        # (205, (1, 2, 4, 5, 7, 11, 13, 14, 15, 17, 18, 20, 23, 24)),
        # (206, (0, 1, 2, 3, 4, 6, 7, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 21, 22, 23, 24)),
        # (207, (1, 3, 5, 6, 9, 12, 14, 20, 22)),
        # (208, (1, 3, 4, 6, 7, 9, 11, 14, 17, 18, 20, 22)),
        # (209, (2, 4, 6, 8, 10, 11, 12, 13, 15, 16, 18, 20, 21, 22, 23, 24)),
        # (210, (1, 3, 7, 11, 12, 13, 15, 17, 19, 20, 22, 23)),
        # (211, (0, 4, 5, 6, 7, 9, 12, 14, 17, 18, 20, 22)),
        # (212, (0, 2, 4, 5, 11, 12, 14, 15, 17, 22, 23, 24)),
        # (213, (0, 6, 7, 8, 11, 14, 16, 17, 18, 20)),
        # (214, (0, 1, 4, 5, 6, 7, 10, 12, 14, 15, 16, 17, 18, 20, 21, 22, 23)),
        # (215, (5, 8, 9, 10, 11, 12, 13, 14, 15, 16, 21, 24)),
        # (216, (0, 5, 8, 12, 15, 16, 18, 19, 20, 22)),
        # (217, (1, 2, 5, 6, 7, 14, 17, 19, 21, 22, 23)),
        # (218, (1, 4, 5, 6, 7, 9, 10, 12, 13, 17, 18, 19, 20, 24)),
        # (219, (0, 2, 3, 4, 6, 9, 10, 11, 14, 17, 18, 19, 21, 23)),
        # (220, (5, 6, 7, 9, 13, 15, 17, 21, 23, 24)),
        # (221, (4, 7, 8, 10, 12, 18, 22, 23, 24)),
        # (222, (0, 3, 5, 6, 8, 9, 10, 11, 14, 15, 17, 18, 19, 22, 24)),
        # (223, (1, 2, 3, 10, 11, 12, 14, 15, 18, 23)),
        # (224, (1, 2, 3, 4, 5, 7, 9, 10, 12, 15, 16, 17, 18, 19, 20, 24)),
        # (225, (0, 6, 7, 11, 12, 17, 18, 19, 21, 22, 24)),
        # (226, (0, 1, 4, 7, 8, 11, 14, 16, 19, 20, 22)),
        # (227, (1, 2, 3, 7, 8, 10, 11, 13, 14, 15, 18, 19, 21, 23)),
        # (228, (0, 1, 3, 5, 8, 12, 14, 18, 19, 20, 21, 22, 23, 24)),
        # (229, (1, 5, 6, 8, 15, 16, 20, 22)),
        # (230, (0, 1, 6, 7, 8, 11, 18, 19, 22, 23)),
        # (231, (0, 1, 2, 4, 5, 6, 11, 15, 17, 18, 19, 20, 23)),
        # (232, (0, 1, 3, 5, 6, 7, 8, 13, 16, 20, 21)),
        # (233, (0, 1, 3, 4, 5, 6, 8, 10, 14, 16, 17, 18, 20, 24)),
        # (234, (0, 1, 3, 4, 6, 7, 9, 10, 12, 14, 15, 17, 18, 20, 21, 23, 24)),
        # (235, (4, 10, 11, 13, 15, 21, 22, 24)),
        # (236, (2, 3, 4, 5, 6, 9, 10, 12, 13, 14, 16, 19, 24)),
        # (237, (2, 3, 5, 8, 12, 14, 15, 18, 23, 24)),
        # (238, (3, 5, 6, 9, 10, 13, 15, 20, 22, 23, 24)),
        # (239, (0, 7, 10, 13, 14, 15, 16, 17, 19, 20, 21)),
        # (240, (2, 3, 4, 5, 6, 7, 9, 10, 12, 13, 16, 19, 20, 21, 23, 24)),
        # (241, (0, 2, 3, 5, 6, 8, 11, 13, 14, 16, 17, 19, 20)),
        # (242, (2, 3, 5, 7, 8, 10, 11, 14, 16, 17, 20, 24)),
        # (243, (1, 2, 4, 8, 9, 12, 13, 17, 18, 20, 22)),
        # (244, (0, 1, 2, 3, 4, 8, 13, 15, 16, 17, 18, 24)),
        # (245, (0, 1, 2, 3, 4, 5, 7, 11, 12, 14, 15, 18, 20, 21, 23, 24)),
        # (246, (0, 3, 4, 5, 6, 8, 10, 11, 12, 14, 15, 17, 18, 19)),
        # (247, (0, 3, 4, 5, 9, 11, 13, 14, 16, 17, 19, 21, 22, 24)),
        # (248, (0, 2, 3, 4, 5, 6, 9, 12, 13, 17, 18, 19, 20, 22, 24)),
        # (249, (0, 1, 5, 7, 8, 10, 12, 14, 15, 16, 17, 21, 22, 23)),
        # (250, (1,2,6,7,9,10,11,13,14,16,17,19,22,23)),
        # (251, (0,3,8,11,13,16,18,20,21,22,23,24)),
        # (252, (3,4,5,8,9,14,16,19,20,22)),
        # (253, (0,1,4,8,10,11,12,15,17,19,20,21,22,24)),
        # (254, (1,4,7,8,10,14,16,22,23,24)),
        # (255, (1,4,5,6,9,14,16,18,19,20,23,24)),
        # (256, (0,5,6,7,10,12,14,15,16,17,20)),
        (257, ()),
        # (258, ()),
        # (259, ()),
        # (260, ()),
        # (261, ()),
        # (262, ()),
        # (263, ()),
        # (264, ()),
        # (265, ()),
        # (266, ()),
        # (267, ()),
        # (268, ()),
        # (269, ()),
        # (270, ()),
        # (271, ()),
        # (272, ()),
        # (273, ()),
        # (274, ()),
        # (275, ()),
        # (276, ()),
        # (277, ()),
        # (278, ()),
        # (279, ()),
        # (280, ()),
        # (281, ()),
        # (282, ()),
        # (283, ()),
        # (284, ()),
        # (285, ()),
        # (286, ()),
        # (287, ()),
        # (288, ()),
        # (289, ()),
        # (290, ()),
        # (291, ()),
        # (292, ()),
        # (293, ()),
        # (294, ()),
        # (295, ()),
        # (296, ()),
        # (297, ()),
        # (298, ()),
        # (299, ()),
        # (300, ()),
        # (301, ()),
        # (302, ()),
        # (303, ()),
        # (304, ()),
        # (305, ()),
        # (306, ()),
        # (307, ()),
        # (308, ()),
        # (309, ()),
        # (310, ()),
        # (311, ()),
        # (312, ()),
        # (313, ()),
        # (314, ()),
        # (315, ()),
        # (316, ()),
        # (317, ()),
        # (318, ()),
        # (319, ()),
        # (320, ()),
        # (321, ()),
        # (322, ()),
        # (323, ()),
        # (324, ()),
        # (325, ()),
        # (326, ()),
        # (327, ()),
        # (328, ()),
        # (329, ()),
        # (330, ()),
        # (331, ()),
        # (332, ()),
        # (333, ()),
        # (334, ()),
        # (335, ()),
        # (336, ()),
        # (337, ()),
        # (338, ()),
        # (339, ()),
        # (340, ()),
        # (341, ()),
        # (342, ()),
        # (343, ()),
        # (344, ()),
        # (345, ()),
        # (346, ()),
        # (347, ()),
        # (348, ()),
        # (349, ()),
        # (350, ()),
        # (351, ()),
        # (352, ()),
        # (353, ()),
        # (354, ()),
        # (355, ()),
    )

    matrices = []
    for level, lights in (lightss[-1],):
        for light in lights:
            assert 0 <= light < (rowCountAndColumnCount * rowCountAndColumnCount)

        matrix = ["▯", ] * (rowCountAndColumnCount * rowCountAndColumnCount)

        for light in lights:
            matrix[light] = symbolOn

        matrices.append((level, lights, matrix,))

    solutions = []
    for level, lights, matrix in matrices:
        print("-----------------------------------")
        print(f"level {level}\n")
        printMatrix2d(matrix)

        solution = solveLightsOff(matrix)
        solutions.append((level, lights, matrix, solution))

        print()
        if solution is not None:
            print(f"        ({level}, {tuple(solution)}),")
        else:
            print(f"        ({level}, {solution}),")
        print()
    print("-----------------------------------")
    print()  # newline

    # for level, lights, matrix, solution in solutions:
    #     print(f"({level}, {tuple(solution)}),")
